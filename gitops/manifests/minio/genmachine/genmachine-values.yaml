---
minio:
  image:
    repository: quay.io/minio/minio
    tag: RELEASE.2025-03-12T18-04-18Z
    pullPolicy: IfNotPresent
  mcImage:
    repository: quay.io/minio/mc
    tag: RELEASE.2025-03-12T17-29-24Z
    pullPolicy: IfNotPresent

  mode: standalone
  existingSecret: 'minio-creds'
  # rootUser: "minio"
  # rootPassword: "minio123"

  tls:
    enabled: false

  persistence:
    enabled: true
    annotations:
    existingClaim: 'pvc-minio'
    storageClass: 'nfs-csi-retain'
    volumeName: 'minio'
    accessMode: ReadWriteOnce
    size: 50Gi

  ingress:
    enabled: true
    ingressClassName: 'traefik'
    annotations:
      cert-manager.io/cluster-issuer: fredcorp-ca
      cert-manager.io/common-name: minio-api.talos-genmachine.fredcorp.com
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
      traefik.ingress.kubernetes.io/service.scheme: https
    path: /
    hosts:
      - minio-api.talos-genmachine.fredcorp.com
    tls:
      - secretName: minio-api-tls-cert
        hosts:
          - minio-api.talos-genmachine.fredcorp.com

  consoleIngress:
    enabled: true
    ingressClassName: 'traefik'
    annotations:
      cert-manager.io/cluster-issuer: fredcorp-ca
      cert-manager.io/common-name: minio.talos-genmachine.fredcorp.com
      traefik.ingress.kubernetes.io/router.entrypoints: websecure
      traefik.ingress.kubernetes.io/service.scheme: https
    path: /
    hosts:
      - minio.talos-genmachine.fredcorp.com
    tls:
      - secretName: minio-tls-cert
        hosts:
          - minio.talos-genmachine.fredcorp.com

  buckets:
    - name: test
      # Policy to be set on the
      # bucket [none|download|upload|public]
      policy: none
      # Purge if bucket exists already
      purge: false
      # set versioning for
      # bucket [true|false]
      versioning: true # remove this key if you do not want versioning feature
      # set objectlocking for
      # bucket [true|false] NOTE: versioning is enabled by default if you use locking
      objectlocking: false

  metrics:
    serviceMonitor:
      enabled: true
      additionalLabels:
        release: prometheus
